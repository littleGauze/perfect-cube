window.__require=function t(e,o,c){function i(r,s){if(!o[r]){if(!e[r]){var l=r.split("/");if(l=l[l.length-1],!e[l]){var a="function"==typeof __require&&__require;if(!s&&a)return a(l,!0);if(n)return n(l,!0);throw new Error("Cannot find module '"+r+"'")}}var h=o[r]={exports:{}};e[r][0].call(h.exports,function(t){return i(e[r][1][t]||t)},h,h.exports,t,e,o,c)}return o[r].exports}for(var n="function"==typeof __require&&__require,r=0;r<c.length;r++)i(c[r]);return i}({Game:[function(t,e,o){"use strict";cc._RF.push(e,"e1b90/rohdEk4SdmmEZANaD","Game");var c=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function c(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(c.prototype=o.prototype,new c)}}(),i=this&&this.__decorate||function(t,e,o,c){var i,n=arguments.length,r=n<3?e:null===c?c=Object.getOwnPropertyDescriptor(e,o):c;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,o,c);else for(var s=t.length-1;s>=0;s--)(i=t[s])&&(r=(n<3?i(r):n>3?i(e,o,r):i(e,o))||r);return n>3&&r&&Object.defineProperty(e,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var n,r=cc._decorator,s=r.ccclass,l=r.property,a=["#4cb4e7","#ffc09f","#c7b3e5","#588c7e","#a3a380"];(function(t){t[t.idle=0]="idle",t[t.growing=1]="growing",t[t.falling=2]="falling"})(n||(n={}));var h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.titleLabel=null,e.blockNode=null,e.baseLeftNode=null,e.baseRightNode=null,e.wallLeftNode=null,e.wallRightNode=null,e.counterLabel=null,e._level=1,e._score=0,e._counter=2,e._bg=null,e.growHandle=null,e._status=n.idle,e}return c(e,t),e.prototype.onLoad=function(){this._bg=cc.find("background",this.node),this.node.on("touchstart",this.grow,this),this.node.on("touchend",this.stop,this)},e.prototype.onDestroy=function(){this.node.off("touchstart",this.grow,this),this.node.off("touchend",this.stop,this)},e.prototype.init=function(){this._score=0,this._level=1,this.updateStatus(),this.setColor(),this.resetWall()},e.prototype.updateStatus=function(){this.titleLabel.string="Score: "+this._score+", Level: "+this._level,this.counterLabel.string=this._counter+""},e.prototype.placeWall=function(t,e){t.runAction(cc.moveTo(.5,cc.v2(e,t.y)).easing(cc.easeCubicActionIn()))},e.prototype.resetWall=function(){var t=100*Math.random()+100,e=t+30+50*Math.random();this.placeWall(this.baseLeftNode,-t/2),this.placeWall(this.baseRightNode,t/2),this.placeWall(this.wallLeftNode,-e/2),this.placeWall(this.wallRightNode,e/2)},e.prototype.grow=function(){if(this._status===n.idle){this._status=n.growing;var t=cc.sequence(cc.scaleTo(3,5),cc.callFunc(function(){}));this.growHandle=this.blockNode.runAction(t)}},e.prototype.stop=function(){this._status===n.growing&&(this._status=n.falling,this.blockNode.stopAction(this.growHandle),this.dropDown())},e.prototype.dropDown=function(){var t=this,e=this.blockNode.width*this.blockNode.scaleX,o=-cc.winSize.height/2+e/2,c=this.baseRightNode.x-this.baseLeftNode.x,i=this.wallRightNode.x-this.wallLeftNode.x,n=!1;e<c?o=-1200:e<i?(n=!0,o+=this.baseLeftNode.height):o+=this.baseLeftNode.height+this.wallLeftNode.height-30;var r=cc.sequence(cc.rotateTo(.2,0),cc.moveTo(.5,cc.v2(0,o)).easing(cc.easeBounceOut()),cc.callFunc(function(){n?t.next():cc.director.loadScene("game")}));this.blockNode.runAction(r)},e.prototype.setColor=function(){var t=cc.Color.BLACK.fromHEX(a[Math.floor(Math.random()*a.length)]);this._bg.runAction(cc.tintTo(.5,t.getR(),t.getG(),t.getB()))},e.prototype.next=function(){this._score++,this._counter--,this._counter<=0&&this.levelUp(),this.updateStatus(),this.resetWall(),this.resetBlock()},e.prototype.levelUp=function(){this._level++,this._counter=2*this._level,this.setColor()},e.prototype.resetBlock=function(){var t=this,e=cc.sequence(cc.spawn(cc.scaleTo(.5,1),cc.moveTo(.5,cc.v2(0,350)),cc.rotateTo(.5,-45)),cc.callFunc(function(){t._status=n.idle}));this.blockNode.runAction(e)},i([l(cc.Label)],e.prototype,"titleLabel",void 0),i([l(cc.Node)],e.prototype,"blockNode",void 0),i([l(cc.Node)],e.prototype,"baseLeftNode",void 0),i([l(cc.Node)],e.prototype,"baseRightNode",void 0),i([l(cc.Node)],e.prototype,"wallLeftNode",void 0),i([l(cc.Node)],e.prototype,"wallRightNode",void 0),i([l(cc.Label)],e.prototype,"counterLabel",void 0),e=i([s],e)}(cc.Component);o.default=h,cc._RF.pop()},{}]},{},["Game"]);